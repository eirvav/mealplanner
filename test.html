<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>test</title>

    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.js"></script>

    <link href="/assets/css/cal.css" rel="stylesheet" />
    <script src="/assets/js/cal.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        /* initialize the external events
        -----------------------------------------------------------------*/

        var containerEl = document.getElementById("external-events-list");
        new FullCalendar.Draggable(containerEl, {
          itemSelector: ".fc-event",
          eventData: function (eventEl) {
            return {
              title: eventEl.innerText.trim(),
            };
          },
        });

        //// the individual way to do it
        // var containerEl = document.getElementById('external-events-list');
        // var eventEls = Array.prototype.slice.call(
        //   containerEl.querySelectorAll('.fc-event')
        // );
        // eventEls.forEach(function(eventEl) {
        //   new FullCalendar.Draggable(eventEl, {
        //     eventData: {
        //       title: eventEl.innerText.trim(),
        //     }
        //   });
        // });

        /* initialize the calendar
        -----------------------------------------------------------------*/

        var calendarEl = document.getElementById("calendar");
        var calendar = new FullCalendar.Calendar(calendarEl, {
          headerToolbar: {
            left: "prev,next today",
            center: "title",
            right: "dayGridMonth,timeGridWeek,timeGridDay,listWeek",
          },
          editable: true,
          droppable: true, // this allows things to be dropped onto the calendar
          drop: function (arg) {
            // is the "remove after drop" checkbox checked?
            if (document.getElementById("drop-remove").checked) {
              // if so, remove the element from the "Draggable Events" list
              arg.draggedEl.parentNode.removeChild(arg.draggedEl);
            }
          },
        });
        calendar.render();
      });
    </script>
  </head>
  <body>
    <main id="main">
      <div class="title calendar-width">
        <h1>Your <strong>Calendar</strong></h1>
      </div>
      <section class="container calendar-width">
        <div id="wrap">
          <div id="external-events">
            <div class="find"></div>
            <div id="external-events-list"></div>
            <p>
              <input type="checkbox" id="drop-remove" />
              <label for="drop-remove">remove after drop</label>
            </p>
          </div>
          <div id="calendar-wrap">
            <div id="calendar"></div>
          </div>
          <br />
        </div>
      </section>
    </main>
  </body>
</html>
